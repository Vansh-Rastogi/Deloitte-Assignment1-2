<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <fieldset>
        <legend>Users Data...</legend>
        <input type="button" onclick="showUsers()" value="SHOW USER" style="width: fit-content; height: fit-content;"> <br>
        <input type="text" id="getID" placeholder="Enter a User ID">
        <input type="button" onclick="removeUser()" value="REMOVE USER" style="width: fit-content; height: fit-content;">
    </fieldset>

    <table id="myTable" border="2">
        <tr>
            <th>ID</th>
            <th>Email</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Avatar</th>
        </tr>
    </table>
    <script>
        async function fetchData() {
            try {
                const url = "https://reqres.in/api/users";
                let response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                let jsonResponse = await response.json();
                return jsonResponse.data;
            } catch (error) {
                console.error('Failed to fetch users:', error);
            }
        }

        async function showUsers() {
            const userData = await fetchData();
            if (userData) {
                const tableObj = document.getElementById("myTable");
                let i = 1;
                for (let item of userData) {
                    let row = tableObj.insertRow(i++);
                    let col1 = row.insertCell(0);
                    let col2 = row.insertCell(1);
                    let col3 = row.insertCell(2);
                    let col4 = row.insertCell(3);
                    let col5 = row.insertCell(4);
                    col1.innerHTML = item.id;
                    col2.innerHTML = item.email;
                    col3.innerHTML = item.first_name;
                    col4.innerHTML = item.last_name;
                    col5.innerHTML = `<img src="${item.avatar}" style="height:45px; width:45px; border-radius:50%;">`;
                }
            }
        }

        async function removeUser() {
            const userData = await fetchData();
            let uid = parseInt(document.getElementById("getID").value);
            let tableObj = document.getElementById("myTable");
            while (tableObj.rows.length > 1) {
                tableObj.deleteRow(1);
            }
            for (let item of userData) {
                if (item.id !== uid) {
                    let row = tableObj.insertRow(-1);
                    let col1 = row.insertCell(0);
                    let col2 = row.insertCell(1);
                    let col3 = row.insertCell(2);
                    let col4 = row.insertCell(3);
                    let col5 = row.insertCell(4);
                    col1.innerHTML = item.id;
                    col2.innerHTML = item.email;
                    col3.innerHTML = item.first_name;
                    col4.innerHTML = item.last_name;
                    col5.innerHTML = `<img src="${item.avatar}" style="width: 45px; height: 45px; border-radius: 50%;">`;
                }
            }
        }
    </script>
</body>
</html>
